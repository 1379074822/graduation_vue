webpackJsonp([12],{AmQr:function(e,t){},GnBY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),d={inject:["reload"],data:function(){return{categoryTable:[{}],AddCategoryForm:[{AddCategoryName:"",AddCategoryCode:""}],amendcategoryForm:[{categoryName:"",categoryCode:""}],showdialog:!1}},created:function(){this.mounted()},mounted:function(){var e=this;this.$axios.get("http://localhost:8081/category/findall").then(function(t){t.data&&(e.categoryTable=t.data)}).catch(function(e){})},methods:{delectcategory:function(e){var t=this;this.$confirm("此操作将永久删除该类别, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/category/delect",{categoryId:e}).then(function(e){200===e.data.code?(t.$message({type:"success",message:"删除成功!"}),t.reload()):(t.$message({type:"error",message:"删除失败!"}),t.reload())})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},SubmitAmendFrom:function(){var e=this;this.$axios.post("/category/amendCategory",{categoryId:this.amendcategoryForm.categoryId,categoryName:this.amendcategoryForm.categoryName,categoryCode:this.amendcategoryForm.categoryCode,amendId:localStorage.getItem("userId"),amendName:JSON.parse(window.localStorage.getItem("user")).username}).then(function(t){200===t.data.code?(e.$message.info("修改成功"),e.reload()):400===t.data.code&&(alert(t.data.message),e.$message.error("修改失败"),e.modification=!1,e.reload())})},amendDialogClose:function(){this.cancel()},amendcategory:function(e){this.showdialog=!0,this.notamend=this.categoryTable[e],this.amendcategoryForm=JSON.parse(r()(this.notamend))},cancel:function(){this.showdialog=!1,this.amendcategoryForm=JSON.parse(r()(this.notamend))},addCategory:function(){var e=this;null!=this.AddCategoryForm.AddCategoryName&&null!=this.AddCategoryForm.AddCategoryCode?this.$axios.post("/category/save",{categoryCode:this.AddCategoryForm.AddCategoryCode,categoryName:this.AddCategoryForm.AddCategoryName,createId:localStorage.getItem("userId"),createName:JSON.parse(window.localStorage.getItem("user")).username}).then(function(t){200===t.data.code&&e.$message.success(t.data.message),e.reload()}):this.$message.error("类别名称不能为空")},selectcategory:function(){var e=this;this.$axios.post("/category/byCategoryCode",{categoryCode:this.AddCategoryForm.AddCategoryCode}).then(function(t){200===t.data.code&&(e.$message.error(t.data.message),e.AddCategoryForm.AddCategoryCode="")})},resetAdd:function(){this.$refs.AddCategoryForm.resetFields()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",[a("i",{staticClass:"el-icon-circle-plus-outline"}),a("span",{staticStyle:{margin:"10px"}},[e._v("增加类别")])]),e._v(" "),a("el-form",{ref:"AddCategoryForm",staticStyle:{padding:"18px"},attrs:{inline:!0,model:e.AddCategoryForm}},[a("el-form-item",{attrs:{label:"添加类别",prop:"AddCategoryName"}},[a("el-input",{attrs:{placeholder:"类别名称"},model:{value:e.AddCategoryForm.AddCategoryName,callback:function(t){e.$set(e.AddCategoryForm,"AddCategoryName",t)},expression:"AddCategoryForm.AddCategoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别类型",prop:"AddCategoryCode"}},[a("el-input",{attrs:{placeholder:"请输入类别编号"},on:{blur:e.selectcategory},model:{value:e.AddCategoryForm.AddCategoryCode,callback:function(t){e.$set(e.AddCategoryForm,"AddCategoryCode",t)},expression:"AddCategoryForm.AddCategoryCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{on:{click:e.resetAdd}},[e._v("重置")]),e._v(" "),a("el-button",{staticStyle:{"background-color":"cornflowerblue",color:"white"},on:{click:e.addCategory}},[e._v("添加")])],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categoryTable,height:"100vh",border:""}},[a("el-table-column",{attrs:{prop:"categoryId",label:"类别ID",width:"90px",index:e.categoryId}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"类别名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryCode",label:"类别类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"创建人",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amendName",label:"修改人",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"background-color":"darkturquoise",color:"white"},attrs:{size:"small"},on:{click:function(a){return e.amendcategory(t.$index)}}},[e._v("修改")]),e._v(" "),a("el-dialog",{attrs:{title:"修改信息",visible:e.showdialog,"before-close":e.amendDialogClose},on:{"update:visible":function(t){e.showdialog=t}}},[[a("el-form",{ref:"amendcategoryForm",staticStyle:{margin:"60px"},attrs:{model:e.amendcategoryForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"类别名称",prop:"categoryName"}},[a("el-input",{model:{value:e.amendcategoryForm.categoryName,callback:function(t){e.$set(e.amendcategoryForm,"categoryName",t)},expression:"amendcategoryForm.categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类别类型",prop:"categoryCode"}},[a("el-input",{on:{blur:e.selectcategory},model:{value:e.amendcategoryForm.categoryCode,callback:function(t){e.$set(e.amendcategoryForm,"categoryCode",t)},expression:"amendcategoryForm.categoryCode"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.SubmitAmendFrom}},[e._v("立即修改")]),e._v(" "),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)]],2),e._v(" "),a("el-button",{staticStyle:{"background-color":"#FF6666",color:"white"},attrs:{size:"small",type:"danger"},on:{click:function(a){return e.delectcategory(e.categoryTable[t.$index].categoryId)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(d,c,!1,function(e){a("AmQr")},"data-v-189926db",null);t.default=l.exports}});
//# sourceMappingURL=12.46f483f679743723320d.js.map