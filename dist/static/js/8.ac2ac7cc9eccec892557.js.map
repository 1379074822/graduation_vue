{"version":3,"sources":["webpack:///src/components/common/AddProduct.vue","webpack:///./src/components/common/AddProduct.vue?f1a0","webpack:///./src/components/common/AddProduct.vue"],"names":["AddProduct","data","dialogImageUrl","dialogVisible","disabled","addForm","productname","productprice","producticon","productcategory","TypeList","createid","createname","methods","sendprice","num","test","this","$message","error","SubmitFrom","_this","$axios","post","picture","createId","localStorage","getItem","createName","JSON","parse","window","username","then","response","code","alert","message","$refs","resetFields","resetForm","selectCode","_this2","get","res","catch","failResponse","handleSuccess","file","success","console","log","handleRemove","fileList","handlePreview","url","onExceed","files","type","duration","beforeUpload","isJPG","isGIF","isPNG","isBMP","isLt2M","size","common_AddProduct","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticStyle","margin","attrs","model","label-width","label","prop","value","callback","$$v","$set","expression","_v","on","blur","$event","action","name","list-type","limit","file-list","on-exceed","before-upload","on-preview","on-success","on-remove","visible","update:visible","width","src","alt","placeholder","focus","_l","items","key","categoryid","categoryName","categoryCode","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.ac2ac7cc9eccec892557.js","sourcesContent":["<template>\n  <el-card class=\"box-card\">\n  <el-form ref=\"addForm\" :model=\"addForm\"  label-width=\"80px\" style=\"margin: 60px\">\n    <el-form-item label=\"商品名称\" prop=\"productname\">\n      <el-input v-model=\"addForm.productname\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品价格\" prop=\"productprice\">\n      <el-input v-model=\"addForm.productprice\" @blur=\"sendprice(addForm.productprice)\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"商品图片\" prop=\"producticon\"  >\n      <el-upload v-model=\"addForm.producticon\"\n        ref=\"upload\"\n        action=\"http://localhost:8081/product/upload\"\n        name=\"picture\"\n        list-type=\"picture-card\"\n        :limit=\"1\"\n        :file-list=\"fileList\"\n        :on-exceed=\"onExceed\"\n        :before-upload=\"beforeUpload\"\n        :on-preview=\"handlePreview\"\n        :on-success=\"handleSuccess\"\n        :on-remove=\"handleRemove\"\n       >\n        <i class=\"el-icon-plus\" ></i>\n      </el-upload>\n      <el-dialog :visible.sync=\"dialogVisible\">\n        <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n      </el-dialog>\n    </el-form-item>\n    <el-form-item label=\"商品类型\" prop=\"productcategory\">\n      <el-select v-model=\"addForm.productcategory\" placeholder=\"商品类型\"  @focus=\"selectCode(addForm.productcategory)\">\n        <el-option  v-for=\"items in addForm.TypeList\" :key=\"items.categoryid\" :label=\"items.categoryName\" :value=\"items.categoryCode\"></el-option>\n      </el-select>\n    </el-form-item>\n    <el-form-item >\n      <el-button type=\"primary\" @click=\"SubmitFrom\">立即创建</el-button>\n      <el-button @click=\"resetForm\">取消</el-button>\n    </el-form-item>\n    </el-form>\n  </el-card>\n\n</template>\n\n\n<style scoped>\n  .text {\n    font-size: 14px;\n  }\n\n  .item {\n    margin-bottom: 18px;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n  .clearfix:after {\n    clear: both\n  }\n\n  .box-card {\n    width: 600px;\n    display: flex;\n    align-items: center;\n  }\n\n</style>\n<script>\n  export default {\n    data() {\n      return {\n        dialogImageUrl: '',\n        dialogVisible: false,\n        disabled: false,\n        //图片列表（用于在上传组件中回显图片）\n        addForm:{\n          productname:'',\n          productprice:'',\n          producticon:'',\n          productcategory:'',\n          TypeList:[{}]\n        },\n        createid:'',\n        createname:''\n      }\n\n    },\n\n    methods:{\n      //正则表达式 判断输入的价格是否为正整数 且小数点仅有后两位\n      sendprice:function(num){\n        var regId= /^\\d+\\.?\\d{0,2}$/;\n        if(!regId.test(num)){\n          this.$message.error(\"请正确输入数字\");\n          this.addForm.productprice='';\n        }\n      },\n      //提交添加商品表单 将数据添加到后台中\n      SubmitFrom(){\n        this.$axios.post('/product/save',{\n          productname:this.addForm.productname,\n          productprice:this.addForm.productprice,\n          producticon:this.picture,\n          productcategory:this.addForm.productcategory,\n          createId:localStorage.getItem(\"userId\"),\n          createName:JSON.parse(window.localStorage.getItem('user')).username\n        }).then(response=>{\n          if(response.data.code===200){\n            alert(response.data.message)\n            this.$refs.addForm.resetFields();\n          }else if(response.data.code===400){\n            alert(response.data.message)\n            this.$refs.addForm.resetFields();\n          }\n        })\n      },\n      //清空表单中的数据\n      resetForm() {\n        this.$refs.addForm.resetFields();\n      },\n      //下拉框动态查询商品类型\n      selectCode(num){\n        this.$axios.get('/category/findall')\n          .then(res => {\n            if (res.data) {\n              this.addForm.TypeList=res.data\n            }\n          })\n          .catch(failResponse => {\n          })\n      },\n      //文件上传成功的钩子函数\n      handleSuccess(res, file){\n        this.$message.success(\"图片上传成功\");\n        if (file.response.code===200) {\n          this.picture=file.response.message\n          console.log(this.picture)\n          //将返回的文件储存路径赋值picture字段\n        }\n      },\n      handleRemove(file, fileList) {\n        this.$message.success(\"删除成功\");\n      },\n      handlePreview(file) {\n        this.dialogImageUrl = file.url;\n        this.dialogVisible = true;\n      },\n      //上传的文件个数超出设定时触发的函数\n      onExceed(files, fileList) {\n        this.$message({\n          type: 'info',\n          message: '最多只能上传一个图片',\n          duration: 2000\n        });\n      },\n      //文件上传前的前的钩子函数\n        //参数是上传的文件，若返回false，或返回Primary且被reject，则停止上传\n      beforeUpload(file){\n        const isJPG = file.type === 'image/jpeg';\n        const isGIF = file.type === 'image/gif';\n        const isPNG = file.type === 'image/png';\n        const isBMP = file.type === 'image/bmp';\n        const isLt2M = file.size / 1024 / 1024 < 2;\n\n        if (!isJPG && !isGIF && !isPNG && !isBMP) {\n          alert('上传图片必须是JPG/GIF/PNG/BMP 格式!');\n        }\n        if (!isLt2M) {\n          alert('上传图片大小不能超过 2MB!');\n        }\n        return (isJPG || isBMP || isGIF || isPNG) && isLt2M;\n      },\n    }\n\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/AddProduct.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\"},[_c('el-form',{ref:\"addForm\",staticStyle:{\"margin\":\"60px\"},attrs:{\"model\":_vm.addForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"productname\"}},[_c('el-input',{model:{value:(_vm.addForm.productname),callback:function ($$v) {_vm.$set(_vm.addForm, \"productname\", $$v)},expression:\"addForm.productname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"productprice\"}},[_c('el-input',{on:{\"blur\":function($event){return _vm.sendprice(_vm.addForm.productprice)}},model:{value:(_vm.addForm.productprice),callback:function ($$v) {_vm.$set(_vm.addForm, \"productprice\", $$v)},expression:\"addForm.productprice\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品图片\",\"prop\":\"producticon\"}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"http://localhost:8081/product/upload\",\"name\":\"picture\",\"list-type\":\"picture-card\",\"limit\":1,\"file-list\":_vm.fileList,\"on-exceed\":_vm.onExceed,\"before-upload\":_vm.beforeUpload,\"on-preview\":_vm.handlePreview,\"on-success\":_vm.handleSuccess,\"on-remove\":_vm.handleRemove},model:{value:(_vm.addForm.producticon),callback:function ($$v) {_vm.$set(_vm.addForm, \"producticon\", $$v)},expression:\"addForm.producticon\"}},[_c('i',{staticClass:\"el-icon-plus\"})]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogVisible},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('img',{attrs:{\"width\":\"100%\",\"src\":_vm.dialogImageUrl,\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商品类型\",\"prop\":\"productcategory\"}},[_c('el-select',{attrs:{\"placeholder\":\"商品类型\"},on:{\"focus\":function($event){return _vm.selectCode(_vm.addForm.productcategory)}},model:{value:(_vm.addForm.productcategory),callback:function ($$v) {_vm.$set(_vm.addForm, \"productcategory\", $$v)},expression:\"addForm.productcategory\"}},_vm._l((_vm.addForm.TypeList),function(items){return _c('el-option',{key:items.categoryid,attrs:{\"label\":items.categoryName,\"value\":items.categoryCode}})}),1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.SubmitFrom}},[_vm._v(\"立即创建\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-557504cc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/AddProduct.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-557504cc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddProduct.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddProduct.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddProduct.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-557504cc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddProduct.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-557504cc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/AddProduct.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}