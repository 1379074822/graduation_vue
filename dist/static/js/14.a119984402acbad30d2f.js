webpackJsonp([14],{"/RYN":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),r=a.n(o),s={inject:["reload"],data:function(){return{tableData:[{}],ruleForm:{worksName:"",createName:""},TypeList:[{}],amendForm:{productName:"",productPrice:"",productIcon:"",productStatus:"",categoryCode:""},modification:!1,dialogVisible:!1,dialogImageUrl:"",notamend:[],StatusList:[{value:0,label:"上架"},{value:1,label:"下架"}]}},created:function(){this.mounted()},mounted:function(){var e=this;this.$axios.post("/works/getAllWithScoreSearch",{}).then(function(t){t.data&&(e.tableData=t.data)}).catch(function(e){})},methods:{changeStatus:function(e,t){var a=this;this.$axios.post("/works/updateWorks",{id:e,status:t}).then(function(e){a.submitForm()})},openPostWindow:function(e,t,a){var o=document.createElement("form");o.id="tempForm1",o.method="post",o.action=e,o.target=a;var r=document.createElement("input");r.type="hidden",r.name="worksName",r.value=this.ruleForm.worksName,o.appendChild(r);var s=document.createElement("input");s.type="hidden",s.name="createName",s.value=this.ruleForm.createName,o.appendChild(s),o.attachEvent("onsubmit",function(){openWindow(a)}),document.body.appendChild(o),o.fireEvent("onsubmit"),o.submit(),document.body.removeChild(o)},openWindow:function(e){window.open("about:blank",e,"height=400, width=400, top=0, left=0, toolbar=yes, menubar=yes, scrollbars=yes, resizable=yes,location=yes, status=yes")},exportList:function(){window.open("http://47.103.29.16:8081/export/excel?worksName="+this.ruleForm.worksName+"&createName="+this.ruleForm.createName)},SubmitFrom:function(){var e=this;this.$axios.post("/product/amend",{productId:this.amendForm.productId,productName:this.amendForm.productName,productPrice:this.amendForm.productPrice,productIcon:this.amendForm.productIcon,productStatus:this.amendForm.productStatus,categoryCode:this.amendForm.categoryCode,amendId:localStorage.getItem("userId"),amendName:JSON.parse(window.localStorage.getItem("user")).username}).then(function(t){200===t.data.code?(e.$message.info("修改成功"),e.reload()):400===t.data.code&&(alert(t.data.message),e.$message.error("修改失败"),e.modification=!1,e.reload())})},callOff:function(){this.modification=!1,this.amendForm=JSON.parse(r()(this.notamend))},handleDialogClose:function(){this.callOff()},sendid:function(e){/^\d+\.?\d{0,2}$/.test(e)||(this.$message.error("请正确输入数字"),this.ruleForm.selectid="",this.amendForm.productPrice="")},selectCode:function(e){var t=this;this.$axios.get("/category/findall").then(function(e){e.data&&(t.ruleForm.CodeList=e.data)}).catch(function(e){})},resetForm:function(){this.$refs.ruleForm.resetFields()},submitForm:function(){var e=this;this.$axios.post("/works/getAllWithScoreSearch",{worksName:this.ruleForm.worksName,createName:this.ruleForm.createName}).then(function(t){t.data&&(e.tableData=t.data)}).catch(function(e){})},handleSuccess:function(e,t){this.$message.success("图片上传成功"),200===t.response.code&&(this.amendForm.productIcon=t.response.message)},handleRemove:function(e,t){this.$message.success("删除成功")},handlePreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},onExceed:function(e,t){this.$message({type:"info",message:"最多只能上传一个图片",duration:2e3})},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/gif"===e.type,o="image/png"===e.type,r="image/bmp"===e.type,s=e.size/1024/1024<2;return t||a||o||r||alert("上传图片必须是JPG/GIF/PNG/BMP 格式!"),s||alert("上传图片大小不能超过 2MB!"),(t||r||a||o)&&s}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"select"},[a("el-card",{staticClass:"box-card",staticStyle:{height:"auto"}},[a("div",[a("i",{staticClass:"el-icon-search"}),a("span",{staticStyle:{margin:"10px"}},[e._v("筛选搜索")])]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.ruleForm}},[a("el-form-item",{attrs:{label:"作品名称",prop:"worksName"}},[a("el-input",{attrs:{placeholder:"作品名称"},model:{value:e.ruleForm.worksName,callback:function(t){e.$set(e.ruleForm,"worksName",t)},expression:"ruleForm.worksName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"作品提交人",prop:"createName"}},[a("el-input",{attrs:{placeholder:"提交人"},model:{value:e.ruleForm.createName,callback:function(t){e.$set(e.ruleForm,"createName",t)},expression:"ruleForm.createName"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"500px",height:"40px",width:"66px"},on:{click:e.resetForm}},[e._v("重置")]),e._v(" "),a("el-button",{staticStyle:{height:"40px",width:"66px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("查询")]),e._v(" "),a("el-button",{staticStyle:{height:"40px",width:"66px"},attrs:{type:"primary"},on:{click:e.exportList}},[e._v("导出")])],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.load,expression:"load"}],staticStyle:{width:"100%",overflow:"auto"},attrs:{data:e.tableData,height:"600px",border:""}},[a("el-table-column",{attrs:{prop:"worksName",sortable:"",label:"作品名",index:e.productId}}),e._v(" "),a("el-table-column",{attrs:{prop:"worksDesc",label:"作品介绍"}}),e._v(" "),a("el-table-column",{attrs:{label:"作品图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.fileUrl,alt:"错误",height:"100px",width:"100px"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"score",sortable:"",label:"作品得分"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusDesc",sortable:"",label:"作品状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTimeDesc",sortable:"",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",sortable:"",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"batch",label:"批次"}})],1)],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(e){a("Zju1")},"data-v-1525f70c",null);t.default=n.exports},Zju1:function(e,t){}});
//# sourceMappingURL=14.a119984402acbad30d2f.js.map