webpackJsonp([0],{QMPV:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"UserMain",data:function(){return{dialogImageUrl:"",dialogVisible2:!1,loginUserName:"",loginUserType:"",isRouterAlive:!0,showCenter:!1,activeIndex:"productShow",dialogTableVisible:!1,dialogFormVisible:!1,imgFileList:[],form:{fileUrl:"",worksDesc:"",worksName:"",type:"1"},options:[{value:"1",label:"自然"},{value:"2",label:"地理"},{value:"3",label:"美学"},{value:"4",label:"科技"}]}},provide:function(){return{reload:this.reload}},created:function(){this.loginUserName=JSON.parse(window.localStorage.getItem("user")).userName,this.loginUserType=JSON.parse(window.localStorage.getItem("user")).type},mounted:function(){null==window.localStorage.getItem("batch")&&window.localStorage.setItem("batch",1),null==window.localStorage.getItem("rounds")&&window.localStorage.setItem("rounds",1)},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})},resetForm:function(){this.form.type="1",this.form.worksDesc="",this.form.worksName="",this.imgFileList=[]},createWorks:function(){var e=this;this.$axios.post("/works/saveWorks",{fileUrl:this.form.fileUrl,createId:JSON.parse(window.localStorage.getItem("user")).id,createName:JSON.parse(window.localStorage.getItem("user")).userName,worksDesc:this.form.worksDesc,worksName:this.form.worksName,type:this.form.type}).then(function(t){200==t.status?(e.$message("上传作品成功"),e.dialogFormVisible=!1,e.resetForm()):e.$message({message:"上传作品失败！",type:"error"})}).catch(function(e){})},onSuccess:function(e,t,o){this.form.fileUrl=e,this.fileList=[]},handleSelect:function(e,t){},handleRemove:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible2=!0},handleCommand:function(e){"a"===e?this.$router.push("/user/productShow"):"b"===e?(localStorage.removeItem("user"),this.$router.push("/login")):"c"===e&&(this.showCenter=!0,this.$router.push("/user/userCenter"),this.activeIndex="/user/userCenter")}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticStyle:{"background-image":"url('http://photo.loveyd.com/uploads/allimg/080519/10352220.jpg')","background-image-moz-background-size":"cover",opacity:"0.8"}},[o("el-header",[o("el-menu",{staticClass:"el-menu-demo",staticStyle:{width:"100%"},attrs:{router:"","default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[o("el-menu-item",{staticStyle:{width:"auto","margin-left":"100px"},attrs:{index:"productShow"}},[e._v("作品展示")]),e._v(" "),o("el-submenu",{staticStyle:{width:"auto","margin-left":"100px"},attrs:{index:"/product"}},[o("template",{slot:"title"},[e._v("作品管理")]),e._v(" "),o("el-menu-item",{attrs:{index:"userProduct"}},[e._v("作品查看")]),e._v(" "),1==e.loginUserType?o("el-menu-item",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("作品上传")]):e._e(),e._v(" "),3==e.loginUserType?o("el-submenu",{attrs:{index:""}},[o("template",{slot:"title"},[e._v("评委操作")]),e._v(" "),o("el-menu-item",{attrs:{index:"/user/productScore"}},[e._v("作品评分")]),e._v(" "),o("el-menu-item",{attrs:{index:"/user/advance"}},[e._v("晋级操作")]),e._v(" "),o("el-menu-item",{attrs:{index:"/user/report"}},[e._v("评审区")])],2):e._e()],2),e._v(" "),o("el-menu-item",{staticStyle:{width:"auto","margin-left":"100px"},attrs:{index:"/user/userMessageList"}},[e._v("留言板")]),e._v(" "),o("el-menu-item",{staticStyle:{width:"auto","margin-left":"100px"},attrs:{index:"/user/userCenter"}},[e._v("个人中心")]),e._v(" "),o("el-dropdown",{staticStyle:{float:"right"},on:{command:e.handleCommand}},[o("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),o("span",[e._v(e._s(e.loginUserName))]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"a"}},[e._v("首页")]),e._v(" "),o("el-dropdown-item",{attrs:{command:"b"}},[e._v("退出")])],1)],1)],1)],1),e._v(" "),o("el-main",[e.isRouterAlive?o("router-view",{staticStyle:{width:"87%",height:"600px","margin-left":"100px"}}):e._e(),e._v(" "),o("el-dialog",{attrs:{title:"上传新作品",visible:e.dialogFormVisible,"modal-append-to-body":!1,width:"500px",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{"label-width":"110px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[o("el-form-item",{attrs:{label:"作品名",prop:"worksName"}},[o("el-input",{staticStyle:{width:"auto"},attrs:{autocomplete:"off"},model:{value:e.form.worksName,callback:function(t){e.$set(e.form,"worksName",t)},expression:"form.worksName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"上传图片(单次一张)",prop:"fileUrl"}},[o("el-upload",{attrs:{action:"http://47.103.29.16:8081/works/upload","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.onSuccess,"file-list":e.imgFileList,accept:"png;jpg;jpeg;",limit:1},model:{value:e.form.fileUrl,callback:function(t){e.$set(e.form,"fileUrl",t)},expression:"form.fileUrl"}},[o("i",{staticClass:"el-icon-plus"})]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),o("el-form-item",{attrs:{label:"作品类型",prop:"type"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"作品介绍",prop:"worksDesc"}},[o("el-input",{staticStyle:{width:"200px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"请输入内容",autocomplete:"off"},model:{value:e.form.worksDesc,callback:function(t){e.$set(e.form,"worksDesc",t)},expression:"form.worksDesc"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.createWorks}},[e._v("确 定")])],1)],1),e._v(" "),o("el-backtop",{attrs:{target:".page-component__scroll .el-scrollbar__wrap"}})],1),e._v(" "),o("el-footer",{staticStyle:{"background-color":"bisque"},attrs:{height:"100%"}},[o("span",{staticStyle:{"margin-left":"100px"}},[e._v("优秀作品评定系统")])])],1)},staticRenderFns:[]};var i=o("VU/8")(r,l,!1,function(e){o("ndUw")},"data-v-4a589b08",null);t.default=i.exports},ndUw:function(e,t){}});
//# sourceMappingURL=0.3c999cbef2f7e0a1d19a.js.map